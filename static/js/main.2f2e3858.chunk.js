(this["webpackJsonpthe-blank-blog"]=this["webpackJsonpthe-blank-blog"]||[]).push([[0],{45:function(e,t,n){e.exports=n(74)},50:function(e,t,n){},74:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(24),o=n.n(c),s=n(17),u=n(18),l=n(20),i=n(19),p=n(16),m=n(1),d=(n(50),n(10)),h=n(7),f=n.n(h),b=n(12),v=function(e,t){return{type:"SAVE_DATA",payload:[e,t]}},E=function(e,t){return{type:"ADD_DATA",payload:[e,t]}},g=function(e,t){return{type:"DELETE_DATA",payload:[e,t]}},y=function(e,t,n){return{type:"UPDATE_DATA",payload:[e,t,n]}},j=n(23),O=n.n(j),A=function(e){return"/"===e[0]?"https://damp-shore-59223.herokuapp.com/api"+e:e},D=function(e,t,n){return function(){var a=Object(b.a)(f.a.mark((function a(r){var c;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r({type:"LOADING_DATA"}),a.prev=1,e=A(e),a.next=5,O.a.get(e);case 5:return c=a.sent,"function"===typeof n&&(c=n(c)),r(v(c,t)),a.abrupt("return",c);case 11:a.prev=11,a.t0=a.catch(1),console.log(a.t0);case 14:return a.prev=14,r({type:"DATA_RETRIEVED"}),a.finish(14);case 17:case"end":return a.stop()}}),a,null,[[1,11,14,17]])})));return function(e){return a.apply(this,arguments)}}()},w=function(e,t,n,a){return function(){var r=Object(b.a)(f.a.mark((function r(c){return f.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return c({type:"LOADING_DATA"}),r.prev=1,e=A(e),r.next=5,O.a.post(e,t);case 5:t=r.sent,"function"===typeof a&&(t=a(t)),c(E(t,n)),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(1),console.log(r.t0);case 13:return r.prev=13,c({type:"DATA_RETRIEVED"}),r.finish(13);case 16:case"end":return r.stop()}}),r,null,[[1,10,13,16]])})));return function(e){return r.apply(this,arguments)}}()},T=n(14),k=n(9),C=function(e){Object(l.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={username:"",comment:""},e.handleChange=function(t){return e.setState(Object(k.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),console.log(e.state);var n={commentUser:e.state.username,commentBody:e.state.comment,commentAvatar:"???",commentDate:new Date,commentLikes:0,commentParentId:e.props.parent};e.props.newComment("/comments",n,"comments",(function(e){return e.data})),e.setState({username:"",comment:""})},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this.handleChange,t=this.handleSubmit,n=this.state,a=n.username,c=n.comment;return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:t,id:"new-comment"},r.a.createElement("label",{id:"care-input"},r.a.createElement("input",{name:"username",value:a,onChange:e,placeholder:"username:",required:!0}),r.a.createElement("div",null,"Care to comment?")),r.a.createElement("label",null,r.a.createElement("textarea",{name:"comment",value:c,onChange:e,required:!0})),r.a.createElement("button",null,"Submit")))}}]),n}(a.Component),x=Object(d.b)(null,(function(e){return{newComment:function(t,n,a,r){return e(w(t,n,a,r))}}}))(C),S=function(e){var t=e.comment;return console.log(t),r.a.createElement("div",{className:"comment"},r.a.createElement("h5",null,t.commentUser),r.a.createElement("div",null,t.commentBody))},N=function(e){var t=e.post,n=e.deleteEntity,c=e.comments,o=Object(a.useState)(!1),s=Object(T.a)(o,2),u=s[0],l=s[1],i=Object(m.f)(),p=["/posts/".concat(t.id),"posts",t.id],d=c.filter((function(e){return e.commentParentId===t.id})),h=u?d.map((function(e,t){return r.a.createElement(S,{comment:e,key:t})})):"",f=u?r.a.createElement(x,{parent:t.id}):"",b=function(e){return e.split("T")[0].split("-").join("/")};return console.log(b(t.postDate)),r.a.createElement("div",{className:"a-post"},r.a.createElement("div",{className:"e-icon-b",onClick:function(){console.log("update?"),i.push("/post/".concat(t.id))}}," ",r.a.createElement("svg",{className:"iconic e-icon",viewBox:"0 0 20 20"},r.a.createElement("path",{d:"M18.303,4.742l-1.454-1.455c-0.171-0.171-0.475-0.171-0.646,0l-3.061,3.064H2.019c-0.251,0-0.457,0.205-0.457,0.456v9.578c0,0.251,0.206,0.456,0.457,0.456h13.683c0.252,0,0.457-0.205,0.457-0.456V7.533l2.144-2.146C18.481,5.208,18.483,4.917,18.303,4.742 M15.258,15.929H2.476V7.263h9.754L9.695,9.792c-0.057,0.057-0.101,0.13-0.119,0.212L9.18,11.36h-3.98c-0.251,0-0.457,0.205-0.457,0.456c0,0.253,0.205,0.456,0.457,0.456h4.336c0.023,0,0.899,0.02,1.498-0.127c0.312-0.077,0.55-0.137,0.55-0.137c0.08-0.018,0.155-0.059,0.212-0.118l3.463-3.443V15.929z M11.241,11.156l-1.078,0.267l0.267-1.076l6.097-6.091l0.808,0.808L11.241,11.156z"}))," "),r.a.createElement("div",{className:"d-icon-b",onClick:function(){n.apply(void 0,p),d.forEach((function(e){console.log("deleting comment..."),n("/comments/".concat(e.id),"comments",e.id)}))}}," ",r.a.createElement("svg",{className:"iconic d-icon",viewBox:"0 0 20 20"},r.a.createElement("path",{d:"M17.114,3.923h-4.589V2.427c0-0.252-0.207-0.459-0.46-0.459H7.935c-0.252,0-0.459,0.207-0.459,0.459v1.496h-4.59c-0.252,0-0.459,0.205-0.459,0.459c0,0.252,0.207,0.459,0.459,0.459h1.51v12.732c0,0.252,0.207,0.459,0.459,0.459h10.29c0.254,0,0.459-0.207,0.459-0.459V4.841h1.511c0.252,0,0.459-0.207,0.459-0.459C17.573,4.127,17.366,3.923,17.114,3.923M8.394,2.886h3.214v0.918H8.394V2.886z M14.686,17.114H5.314V4.841h9.372V17.114z M12.525,7.306v7.344c0,0.252-0.207,0.459-0.46,0.459s-0.458-0.207-0.458-0.459V7.306c0-0.254,0.205-0.459,0.458-0.459S12.525,7.051,12.525,7.306M8.394,7.306v7.344c0,0.252-0.207,0.459-0.459,0.459s-0.459-0.207-0.459-0.459V7.306c0-0.254,0.207-0.459,0.459-0.459S8.394,7.051,8.394,7.306"}))," "),r.a.createElement("div",{className:"c-icon-b",onClick:function(){return l(!u)}}," ",r.a.createElement("svg",{className:"iconic c-icon",viewBox:"0 0 20 20"},r.a.createElement("path",{d:"M14.999,8.543c0,0.229-0.188,0.417-0.416,0.417H5.417C5.187,8.959,5,8.772,5,8.543s0.188-0.417,0.417-0.417h9.167C14.812,8.126,14.999,8.314,14.999,8.543 M12.037,10.213H5.417C5.187,10.213,5,10.4,5,10.63c0,0.229,0.188,0.416,0.417,0.416h6.621c0.229,0,0.416-0.188,0.416-0.416C12.453,10.4,12.266,10.213,12.037,10.213 M14.583,6.046H5.417C5.187,6.046,5,6.233,5,6.463c0,0.229,0.188,0.417,0.417,0.417h9.167c0.229,0,0.416-0.188,0.416-0.417C14.999,6.233,14.812,6.046,14.583,6.046 M17.916,3.542v10c0,0.229-0.188,0.417-0.417,0.417H9.373l-2.829,2.796c-0.117,0.116-0.71,0.297-0.71-0.296v-2.5H2.5c-0.229,0-0.417-0.188-0.417-0.417v-10c0-0.229,0.188-0.417,0.417-0.417h15C17.729,3.126,17.916,3.313,17.916,3.542 M17.083,3.959H2.917v9.167H6.25c0.229,0,0.417,0.187,0.417,0.416v1.919l2.242-2.215c0.079-0.077,0.184-0.12,0.294-0.12h7.881V3.959z"}))," "),r.a.createElement("h4",null,t.postSubject),r.a.createElement("h6",null,"Posted by ",t.postUser," on ",b(t.postDate)),r.a.createElement("div",{className:"p-body"},t.postBody),h,f)},P=Object(d.b)((function(e){return{state:e,posts:e.data.posts,comments:e.data.comments}}),(function(e){return{deleteEntity:function(t,n,a){return e(function(e,t,n){return function(){var a=Object(b.a)(f.a.mark((function a(r){return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r({type:"LOADING_DATA"}),a.prev=1,e=A(e),a.next=5,O.a.delete(e).then((function(){return console.log("delete")})).catch((function(e){return console.log("error")}));case 5:r(g(t,n)),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(1),console.log(a.t0);case 11:return a.prev=11,r({type:"DATA_RETRIEVED"}),a.finish(11);case 14:case"end":return a.stop()}}),a,null,[[1,8,11,14]])})));return function(e){return a.apply(this,arguments)}}()}(t,n,a))}}}))((function(e){var t=e.posts,n=e.deleteEntity,a=e.updatePost,c=e.comments,o=t.map((function(e,t){return r.a.createElement(N,{post:e,key:t,deleteEntity:n,updatePost:a,comments:c})}));return r.a.createElement("div",{id:"posts"},o)})),B=function(e){e.title;var t=e.loading,n=Object(m.f)(),a=t?{display:"block"}:{display:"none"};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"loader",id:"loader",style:a}),r.a.createElement("div",{onClick:function(e){return n.push("/post")},className:"n-post"},r.a.createElement("span",null,"New Post")),r.a.createElement(P,null))},V=function(e){Object(l.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={subject:"",body:"",user:"",path:window.location.href.split("/").pop()},e.handleSubmit=function(t){t.preventDefault(),"post"===e.state.path?e.creatingNewPost():e.updatingExistingPost()},e.creatingNewPost=function(){(0,e.props.createPost)("/posts",{postSubject:e.state.subject,postBody:e.state.body,postUser:e.state.user,postDate:new Date,postLikes:0},"posts",(function(e){return e.data})),console.log("creating..."),e.props.history.push("/")},e.updatingExistingPost=function(){var t=e.props.updatePost,n={postSubject:e.state.subject,postBody:e.state.body,postUser:e.state.user};t("/posts/".concat(e.state.path),n,"posts",e.state.path),console.log("updating..."),e.props.history.push("/")},e.handleChange=function(t){var n=t.target,a=n.name,r=n.value;e.setState(Object(k.a)({},a,r))},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("post"===this.state.path){e.next=10;break}return e.prev=1,e.next=4,this.props.getCurrentPost("/posts/".concat(this.state.path),"current",(function(e){return e.data}));case 4:t=e.sent,this.setState({subject:t.postSubject,body:t.postBody,user:t.postUser}),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.subject,n=e.body,a=e.user,c=this.handleSubmit,o=this.handleChange,s="post"===this.state.path?"POST":"UPDATE";return r.a.createElement(r.a.Fragment,null,r.a.createElement(p.b,{to:"/",className:"n-post"},"Back"),r.a.createElement("form",{onSubmit:c,id:"new-post"},r.a.createElement("label",null,r.a.createElement("h3",null,"Subject"),r.a.createElement("input",{name:"subject",value:t,onChange:o,required:!0})),r.a.createElement("label",null,r.a.createElement("h3",null,"\xa0"),r.a.createElement("input",{name:"user",value:a,onChange:o,placeholder:"username:",required:!0})),r.a.createElement("label",{id:"text-body"},r.a.createElement("h3",null,"Body"),r.a.createElement("textarea",{name:"body",value:n,onChange:o,required:!0})),r.a.createElement("button",null,s)))}}]),n}(a.Component),_=Object(d.b)((function(e){return{current:e.data.current}}),(function(e){return{createPost:function(t,n,a,r){return e(w(t,n,a,r))},getCurrentPost:function(t,n,a){return e(D(t,n,a))},updatePost:function(t,n,a,r){return e(function(e,t,n,a){return function(){var r=Object(b.a)(f.a.mark((function r(c){return f.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return c({type:"LOADING_DATA"}),r.prev=1,e=A(e),r.next=5,O.a.put(e,t).then((function(){return console.log("yeet")})).catch((function(e){return console.log("error")}));case 5:c(y(t,n,a)),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(1),console.log(r.t0);case 11:return r.prev=11,c({type:"DATA_RETRIEVED"}),r.finish(11);case 14:case"end":return r.stop()}}),r,null,[[1,8,11,14]])})));return function(e){return r.apply(this,arguments)}}()}(t,n,a,r))}}}))(Object(m.g)(V)),I=function(e){Object(l.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.dataGrab;t("https://random-words-api.herokuapp.com/w?n=1","titleOfBlog",(function(e){var t=e.data[0].charAt(0).toUpperCase()+e.data[0].slice(1);return document.title="The ".concat(t," Blog"),t})),t("/posts","posts",(function(e){return e.data})),t("/comments","comments",(function(e){return e.data})),console.log("v1.07");var n=0,a=setInterval((function(){e.props.loading?n+=100:(console.log("Connection time: "+n+"ms ("+n/1e3+" sec)"),clearInterval(a))}),100);console.log(this.props.loading)}},{key:"render",value:function(){var e=this,t=this.props.titleOfBlog;return r.a.createElement("div",{id:"main-div"},r.a.createElement("h1",null,"The ",t," Blog"),r.a.createElement(p.a,null,r.a.createElement(m.c,null,r.a.createElement(m.a,{exact:!0,path:"/",render:function(){return r.a.createElement(B,{title:t,loading:e.props.loading})}}),r.a.createElement(m.a,{path:"/post",render:function(){return r.a.createElement(_,null)}}))))}}]),n}(a.Component),M=Object(d.b)((function(e){return{comments:e.data.comments,titleOfBlog:e.data.titleOfBlog,loading:e.data.loading}}),(function(e){return{dataGrab:function(t,n,a){return e(D(t,n,a))},formatData:function(t,n){return e(v(t,n))}}}))(I),H=n(11),L=n(43),R=n(44),U=n(31),G=n(6),q={loading:0,comments:[],posts:[],current:{},titleOfBlog:[]};var z=Object(H.combineReducers)({data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SAVE_DATA":var n=Object(T.a)(t.payload,2),a=n[0],r=n[1];return Object(G.a)(Object(G.a)({},e),{},Object(k.a)({},r,a));case"ADD_DATA":var c=Object(T.a)(t.payload,2),o=c[0],s=c[1];return Object(G.a)(Object(G.a)({},e),{},Object(k.a)({},s,[].concat(Object(U.a)(e[s]),[o])));case"DELETE_DATA":var u=Object(T.a)(t.payload,2),l=u[0],i=u[1];return Object(G.a)(Object(G.a)({},e),{},Object(k.a)({},l,e[l].filter((function(e){return e.id!==i}))));case"UPDATE_DATA":var p=Object(T.a)(t.payload,3),m=p[0],d=p[1],h=p[2],f=Object(U.a)(e[d]),b=f.findIndex((function(e){return Number(e.id)===Number(h)}));return Object.keys(m).forEach((function(e){return f[b][e]=m[e]})),Object(G.a)(Object(G.a)({},e),{},Object(k.a)({},d,f));case"LOADING_DATA":return Object(G.a)(Object(G.a)({},e),{},{loading:e.loading+1});case"DATA_RETRIEVED":return Object(G.a)(Object(G.a)({},e),{},{loading:e.loading-1});default:return e}}}),F=Object(H.createStore)(z,Object(R.composeWithDevTools)(Object(H.applyMiddleware)(L.a)));o.a.render(r.a.createElement(d.a,{store:F},r.a.createElement(M,null)),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.2f2e3858.chunk.js.map